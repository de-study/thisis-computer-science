# 네트워크의 기본 구조

- 네트워크는 노드와 간선으로 이루어진 자료구조
- 그래프의 형태를 가짐
- 네트워크 상에서 노드와 노드 사이의 연결 구조는 네트워크 토폴리지라고 부름

호스트(host):  네트워크의 가장자리에 위치하면서 네트워크를 통해 주고받는 정보를 최초로 송신하고 최종 수신하는 노드

클라이언트(client): 요청을 보내는 호스트

서버(server): 응답을 보내는 호스트

## LAN과 WAN

네트워크는 규모에 따라 LAN과 WAN으로 나뉜다.

- LAN(Local Area Network)
    - 근거리 네트워크
    - 가정 혹은 기업처럼 비교적 가까운 거리를 연결하는 한정된 공간에서의 네트워크
    - 같은 네트워크(LAN)정보를 주고받는 것 뿐만 아니라 LAN간의 통신도 비번
- WAN(Wide Area Network)
    - 원거리 네트워크
    - WAN을 통해 LAN 간 통신이 이루어짐
    - 인터넷을 가능하게 만드는 네트워크
    - 일반적으로 ISP(Internet Service Provider)라는 인터넷 서비스 업체가 구축하고 관리

## 패킷 교환 네트워크

네트워크를 통해 주고받는 데이터는 한 번에 송수신 되지 않는다.

여러 데이터로 쪼개져서 송수신 된다. → 송수신되는 데이터의 단위를 패킷(packet)이라고 한다.

네트워크는 패킷 단위로 주고받는 정보를 쪼개서 송수신하고, 수신지에서 재조립하며 패킷을 주고받는 패킷 교환 네트워크가 대부분을 차지한다.

패킷 구성 요소

- 페이로드(payload): 패킷에서 송수신하고자 하는 데이터
- 헤더, 트레일러: 패킷에 추가되는 부가 정보

## 주소 개념과 전송 방식

올바르게 정보를 주고받기 위해서는 서로를 특정할 수 있는 정보인 주소가 필요하다.

주소는 패킷의 헤더에 명시되는 정보로, 네트워크상 대표적인 주소로는 IP주소와 MAC주소가 있다.

MAC 주소: 물리적으로 장치 자체에 고정된 고유 식별자

IP 주소: 네트워크에서 장치에 할당되는 논리적 주소 (네트워크 환경에 따라 변경됨)

주소를 바탕으로 다양한 수신지 유형을 지정해 패킷을 보낼 수 있으며 전송 방식은 다음과 같다.

- 유니캐스트: 송신지와 수신지가 일대일로 메시지를 주고받는 전송 방식
- 브로드캐스트: 네트워크상의 모든 호스트에게 메시지를 전송하는 전송 방식
    - 브로드캐스트 도메인
        - 브로드캐스트가 전송되는 범위
        - 호스트가 같은 브로드캐스트 도메인에 속해 있는 경우에는 같은 LAN에 속해 있다고 간주
- 멀티캐스트: 네트워크 내의 동일 그룹에 속한 호스트에게만 전송
- 애니캐스트: 네트워크 내의 동일 그룹에 속한 호스트 중 가장 가까운 호스트에게 전송

| 특징 | 브로드캐스트 | 멀티캐스트 |
| --- | --- | --- |
| 수신 대상 | 네트워크에 연결된 모든 호스트 | 특정 그룹에 속한 일부 호스트 |
| 통신 방식 | 1:모든 (One-to-all) | 1:다수 (One-to-many) |
| 장점 | 데이터를 보내는 측의 부담이 적음 | 필요한 수신자에게만 데이터를 전송하여 불필요한 트래픽 감소
 |
| 단점 | 수신을 원치 않는 호스트까지 데이터를 모두 받음 | 수신을 원하는 호스트의 등록 절차가 필요할 수 있음 |

## 프로토콜

프로토콜은 네트워크에서 통신을 주고받는 노드 간의 합의된 규칙이나 방법

프로토콜의 종류

- IP: 네트워크 간의 주소를 지정함
- ARP: IP주소와 MAC주소를 대응시킴
- HTTPS: 보안상 HTTP에 비해 안전함
- TCP: UDP에 비해 신뢰성이 높음

패킷은 프로토콜의 목적과 특징에 따라 그에 맞는 패킷 헤더를 가진다.

## 네트워크 참조 모델

패킷을 주고받는 과정에는 정형화된 순서가 있고 계층적으로 표현할 수 있다.

통신이 이루어지는 단계를 계층적으로 표현한 것이 네트워크 참조 모델이라고 한다.

패킷을 송신하는 쪽은 상위 → 하위 계층으로

수신하는 쪽에서는 하위 → 상위 계층으로

대표적인 네트워크 참조 모델은 OSI 모델과 TCP/IP 모델이 있다.

### OSI 7계층

응용 계층 (application layer)

- 사용자와 가장 밀접하게 맞닿아 있어 여러 네트워크 서비스를 제공하는 계층
- 대표적으로 사용되는 프로토콜: HTTP, HTTPS, DNS 등

표현 계층 (presentation layer)

- 번역가와 같은 역할
- 인코딩과 압축, 암호화같은 작업 수행

세션 계층 (session layer)

- 응용 프로그램 간의 연결 상태를 의미하는 세션을 관리하기 위한 계층

전송 계층 (transport layer)

- 신뢰성 있는 전송을 가능하게 하는 계층
- 포트(port)라는 정보를 통해 특정 응용 프로그램과의 연결 다리 역할을 수행하는 계층
- 대표적으로 사용되는 프로토콜: TCP, UDP

네트워크 계층 (network layer)

- 네트워크 간 통신을 가능하게 하는 계층
- LAN을 넘어 다른 네트워크와 통신을 주고받기 위해 필요한 계층
- 네트워크 간 통신과정에서 호스트를 식별할 수 있는 주소(IP 주소) 필요

데이터 링크 계층 (data link layer)

- 같은 LAN에 속한 호스트끼리 올바르게 정보를 주고받기 위한 계층
- 같은 네트워크에 속한 호스트를 식별할 수 있는 주소(MAC 주소)를 사용하고, 물리 계층을 통해 주고받는 정보에 오류가 없는 확인

물리 계층 (physical layer)

- 가장 최하위 계층으로 비트 신호를 주고받는 계층
- 0과 1로 이루어진 신호로 구성, 이 신호를 유무선 통신 매체를 통해 운반하는 계층

### TCP/IP 모델

- TCP/IP 4계층이라고 불리며 구현과 프로토콜에 중점을 둔 네트워크 참조 모델
- 네트워크 액세스 계층 (network access layer)
    - 최하위 계층
    - 링크 계층 또는 네트워크 인터페이스 계층이라고 불림 (OSI 모델의 데이터 링크 계층과 유사)
- 인터넷 계층 (internet layer)
    - OSI 모델의 네트워크 계층과 유사
- 전송 계층
    - OSI 모델의 전송 계층과 유사
- 응용 계층
    - OSI 모델의 세션 + 표현 + 응용  계층을 합친 것과 유사
- 확장된 모델로 물리 계층이 있음

## 캡슐화와 역캡슐화

패킷의 송수신 과정 중 송신과정에서는 캡슐화가 이루어지고, 수신 과정에서는 역캡슐화가 이루어진다.

- 캡슐화
    - 송신 과정에서 헤더 (및 트레일러)를 추가해 나가는 과정
- 역캡슐화
    - 캡슐화 과정에서 붙인 헤더 (및 트레일러)를 각 계층에서 확인한 뒤 제거하는 과정

각 계층에서 주고받는 패킷(메시지)을 지칭하는 이름이 다르다.

- 전송 계층
    - TCP 기반: 세그먼트 (segment)
    - UDP 기반: 데이터그램 (datagram)
- 네트워크 계층
    - 패킷 또는 데이터그램
- 데이터 링크 계층
    - 프레임 (frame)
- 물리 계층
    - 심볼 (symbol) 또는 비트 (bit)
