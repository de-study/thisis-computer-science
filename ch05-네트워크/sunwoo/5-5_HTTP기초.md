## 도메인 네임과 DNS

네트워크 상의 호스트를 식별하기 위해 기본적으로 사용되는 정보 → IP주소

IP주소로는 특정 호스트의 특징을 나타내기도 어렵고, 호스트의 IP 주소는 언제든 바뀔 수 있기에 도메인 네임(domain name)이다.

도메인 네임과 그에 대응하는 IP주소는 네임 서버(name server)라고 불리는 특별한 서버에서 관리된다.

도메인 네임을 관리하는 네임 서버는 DNS 서버(DNS server)라고 부른다.

호스트는 네임 서버에 특정 도메인 네임을 가진 호스트의 IP주소가 무엇인지 질의함으로써 패킷을 주고받고자 하는 호스트의 IP주소를 얻어낼 수 있다.

IP주소를 모르는 상태에서 도메인 네임에 대응되는 IP주소를 알아내는 과정을 두고 리졸빙(resolve + ing)한다고 표현한다.

도메인 네임과 관련해 알아야 할 내용으로는 2가지이다.

1. 도메인 네임의 계층적 구조
2. 도메인 네임을 관리하는 네임 서버의 계층적 구조

하나의 도메인 네임은 점(.)을 기준으로 계층적으로 분류되어 있으며 구조는 다음과 같다.
<img width="1138" height="355" alt="image" src="https://github.com/user-attachments/assets/acf81e3d-129b-41cd-9866-6aab9dfd77e2" />

최상단에 루트 도메인, 최상위 도메인(TLD), 2단계 도메인(세컨드 레벨 도메인), 3단계 도메인으로 이루어져 있다.

도메인의 단계는 늘어날 수 있지만 일반적으로 3~5단계 정도로 구성된다.

도메인 네임을 모두 포함하는 도메인 네임은 전체 주소 도메인 네임(FQDN: Fully-Qualified Domain Name)이라고 하며, 이를 알면 호스트를 식별할 수 있다.

이렇게 계층적인 형태로 이루어진 도메인 네임을 관리하는 네임 서버 또한 계층적 형태를 이룬다.

네임 서버는 분산되어 관리되는데, 계층적으로 분산되어 있는 도메인 네임에 대한 관리 체계는 도메인 네임 시스템(DNS)라고 부른다.

도메인 네임이 계층적으로 분산되어 있는 네임 서버를 바탕으로 리졸빙되는 과정

- 클라이언트가 IP주소를 알아내고자 할 때 가장 먼저 로컬 네임 서버에게 도메인 네임을 질의
    - 로컬 네임 서버(local name server): 클라이언트와 맞닿아 있는 네임 서버
    - 로컬 네임 서버 주소의 겨우 ISP가 로컬 네임 서버의 주소를 자동으로 할당해줌
    - 할당해주는 로컬 네임 서버 주소 뿐만 아니라 공개 DNS 서버를 이용할 수도 있음
- 로컬 네임 서버가 FQDN에 대응하는 IP주소를 알고있을 경우 클라이언트에게 해당 IP주소를 반환함
- 로컬 네임 서버가 IP주소를 모를 경우에는
    - 도메인 네임의 루트 도메인을 관장하는 서버(루트 네임 서버)에게 질의
    - 최상위 도메인을 관장하는 서버(TLD 네임 서버)
    - 하위 레벨의 도메인 네임을 관장하는 네임 서버 등에 걸쳐 질의를 하게됨
- 클라이언트가 원하는 IP주소를 반환 받으면 클라이언트에게 전달함

위와 같은 질의 과정이 많이 반복되면 오랜 시간이 걸리기에 실제로는 네임 서버들이 기존에 응답받은 결과를 임시로 저장했다가 같은 질의에 활용하는 경우가 많다.

이를 DNS캐시라고 하며, 자주 질의되는 도메인 네임인 경우 대부분이 로컬 네임 서버 선에서 캐시되어 있다.

## 자원과 URI/URL

네트워크의 맥락에서 사용되는 자원(resource)의 의미는 네트워크 상의 메시지를 통해 주고받는 최종 대상을 뜻한다.

URI(Uniform Resource Identifier)는 웹 상에서의 자원을 식별하기 위한 정보를 의미한다.

- 이름을 기반으로 식별 → URN(Uniform Resource Name)
- 위치를 기반으로 식별 → URL(Uniform Resource Locator)
<img width="1280" height="179" alt="image" src="https://github.com/user-attachments/assets/a35bacfd-2828-4d54-98d8-04673da92660" />
- scheme: 자원에 접근하는 방법
    - 일반적으로 사용할 프로토콜이 명시됨 - http, https
- authority: 호스트를 특정할 수 있는 IP주소나 도메인 네임
    - 콜론(:) 뒤에 포트 번호를 명시할 수 있음
- path: 자원이 위치하고 있는 경로
    - 슬래시(/)를 기준으로 계층적으로 표현됨
- query: URL에 대한 매개변수 역할을 하는 문자열
    - 쿼리 문자열(query string), 쿼리 파라미터(query parameter)로 불림
    - 물음표 시작되는 <키=값> 형태의 데이터로, &를 사용하여 여러 쿼리 문자열을 연결할 수 있음
- fragment: 자원의 일부분, 자원의 한 조각을 가리키기 위한 정보
    - 일반적으로 HTML 파일과 같은 자원에서 특정 부분을 가리키는 데 사용됨

## HTTP의 특징

HTTP의 주목적은 데이터의 형식에 구애받지 않고, 다양한 애플리케이션 데이터의 송수신을 가능하게 하는 것이다.

### HTTP 주요 특징

- 요청 응답 기반 프로토콜
    - 요청 메시지를 보내는 클라이언트, 응답 메시지를 보내는 서버가 서로 HTTP 메시지를 주고받는 구조로 작동
- 미디어 독립적 프로토콜
    - HTTP 메시지를 통해 다양한 종류의 자원을 주고받을 수 있음
    - HTTP에서 메시지를 주고받는 자원의 종류는 미디어 타입이라고 함
        - 기본적으로 슬래시를 기준으로 타입/서브타입의 형식으로 구성됨
        - 타입에는 text, image, video, audio, application, multipart가 있음
- 스테이트리스 프로토콜
    - 서버는 HTTP 요청을 보낸 클라이언트 관련 상태를 기억하지 않음
    - 상태를 유지하지 않는 이유는 HTTP 서버는 많은 클라이언트와 동시에 상호작용하기 때문 → 서버에 부담
- 지속 연결 프로토콜
    - 대중적으로 사용되고 있는 HTTP 지속 연결(persistent connection)이라는 기술을 제공함
    - 다른 표현으로 keep-alive 라고 부름
        - 하나의 TCP 연결 상에서 여러 개의 요청-응답을 주고받을 수 있는 기술을 뜻함

## HTTP 메시지 구조

HTTP 메시지는 기본적으로 시작 라인, 필드 라인, 메시지 본문으로 이루어져 있다.

HTTP는 요청 응답 기반의 프로토콜로 HTTP 요청 메시지와 HTTP 응답 메시지가 있다.

### 메시지구조

- 시작 라인: 요청 메시지인지 응답 메시지인지 구분할 수 있음
    - 요청라인: 메서드(method), 요청 대상, HTTP 버전으로 구성
    - 상태라인: HTTP 버전, 상태코드, 이유 구문으로 구성
- 필드라인: HTTP 헤더가 명시됨
    - HTTP 헤더는 메시지 전송과 관련된 부가 정보이며, 제어 정보임
    - 콜론(:) 을 기준으로 헤더 이름, 헤더 값으로 구성
- 메시지 본문

## HTTP 메서드

| HTTP 메서드    | 설명 |
| --- | --- |
| GET, HEAD | 웹 브라우저를 통해 웹 사이트의 자원을 조회하는 용도 GET 에는 응답 메시지에 메시지 본문이 포함되어 있으나, HEAD에는 포함되지 않음 |
| POST | 서버로 하여금 특정 작업을 처리하도록 요청하는 용도로 사용되는 메서드 주로 클라이언트가 서버에 새로운 자원을 생성하고자 할 때 사용 |
| PUT, PATCH | PUT의 경우에는 덮어쓰기 요청 PATCH의 경우에는 부분적 수정을 요청 |
| DELETE | 특정 자원의 삭제를 요청 |

## HTTP 주요 헤더

- 요청 메시지에서 주로 활용되는 HTTP 헤더
    - Host: 요청을 보낼 호스트가 명시되는 헤더
        - 도메인 네임이나 IP 주소로 표현되며, 포트 번호가 포함될 수 있음
    - User-Agent: 요청 메시지를 보낸 클라이언트의 프로그램과 관련한 정보가 명시
        - 브라우저의 종류, 운영체제 및 아키텍처 정보, 웹 브라우저에 시각적 요소를 구현하는 렌더링 엔진 종류 등이 있음
    - Referrer: 클라이언트가 요청을 보낼 때 머무르던 URL이 명시
        - 이를 통해 클라이언트의 유입 경로를 파악할 수 있음
- 응답 메시지에서 주로 활용되는 HTTP 헤더
    - Server: 응답 메시지를 보내는 서버 호스트와 관련된 정보가 명시
    - Allow: 처리 가능한 HTTP 헤더 목록을 알리기 위해 사용
    - Location: 클라이언트에게 자원의 위치를 알려 주기 위해 사용
- 요청, 응답 메시지 모두에서 활용되는 HTTP 헤더
    - Date: 메시지가 생성된 날짜와 시각에 관련된 정보
    - Content-Length: 메시지 본문의 바이트 단위 크기를 표현하기 위해 사용
    - Content-Type, Content-Language, Content-Encoding: 메시지 본문이 어떻게 표현되었는지와 관련된 헤더 → 표현 헤더라고 부르기도 함
    - Connection: HTTP 메시지를 송신하는 호스트가 어떠한 방식의 연결을 원하는지 명시하는 헤더

