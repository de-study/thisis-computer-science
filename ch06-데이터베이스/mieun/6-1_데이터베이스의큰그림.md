# 데이터베이스와 DBMS

## 1. 데이터 베이스

- 사전적 정의: 여러 사람이 공유하여 사용할 목적으로 체계화해 통합, 관리하는 데이터의 집합
- 원하는 기능을 동작시키기 위해 마땅히 저장해야 하는 정보의 집합

## 2. DBMS

- 데이터베이스 관리 시스템(Database Management System): 데이터베이스를 관리하기 위한 프로그램

### 2.1 DBMS의 종류

- 관계형 데이터베이스 관리 시스템(RDBMS 혹은 관계형 데이터베이스)
    - MySQL, Oracle, PostgreSQL 등
- NoSQL 데이터베이스 관리 시스템(NoSQL DBMS 혹은 NoSQL 데이터베이스)
    - MongoDB, Redis 등

### 2.2. 서버로서의 DBMS

- 여느 응용 프로그램과 다를 바 없는 응용 프로그램
- 사용자(개발자)가 만든 프로그램과 상호작용하며 실행
- 클라이언트 - 서버 간의 동작과 유사:
    1. 주로 3way handshake를 통한 TCP 연결
    2. 때로는 데이터베이스에 접속하기 위한 인증 필요
    3. DBMS 클라이언트가 DBMS에 쿼리를 보냄
- 대표적인 데이터베이스 언어 SQL: RDBMS에서 데이터를 조직하고 관리하기 위한 언어
    - 데이터베이스에 질의(Query)하기 위한 구조화된(Structured) 언어(Language)

[RDBMS](https://www.notion.so/RDBMS-2d0af33e485880a4b536f677de511166?pvs=21)

[SQL](https://www.notion.so/SQL-2deaf33e485880fca772fb5ae6712223?pvs=21)

# 파일 대신 데이터베이스 사용 이유

## 1. 데이터 일관성 및 무결성 제공이 어렵다.

- 데이터 접근은 보통 동시다발적으로 발생 → 레이스 컨디션 문제 발생 여지가 있음 → 데이터의 일관성이 훼손되기 쉬움
- 파일에 명시된 데이터에 결함이 없음(무결함)을 검사하기도 번거로움

## 2. 불필요한 중복 저장이 많아진다.

- 파일로 다량의 데이터를 관리하는 경우 동일한 컬럼에 해당하는 데이터가 반복적으로 저장되기 때문에 중복 저장이 발생하기 쉬움

## 3. 데이터 변경 시 연관 데이터 변경이 어렵다.

- 학생.txt 파일에서 학과가 ‘컴퓨터과학’ → ‘컴퓨터학과’로 변경 시 해당하는 모든 데이터를 변경해줘야 함

## 4. 정교한 검색이 어렵다.

- 정교한 조건으로 검색하기 어려움
- 예를 들어, 나이가 25살 이상인 컴퓨터 과학과인 서울 거주자

## 5. 백업 및 복구가 어렵다.

# 데이터베이스의 저장 단위와 트랜잭션

## 데이터베이스의 저장 단위

### RDBMS

- `엔티티(Entity)`: 독립적으로 존재할 수 있는 객체
    - 어떠한 특성을 가진 대상
    - 데이터베이스에 “저장 가능한 대상”
- `속성(Attribute)`: 엔티티의 특성

→ 같은 속성을 공유하는 개별 엔티티는 같은 `엔티티 집합`에 속한다라고 할 수 있음

- `도메인(Domain)`: 엔티티의 속성을 가질 수 있는 값의 집합
    - 성별 속성이 가질 수 있는 도메인은 여자, 남자
- `레코드(Record)`:  데이터베이스에 기록된 각 각의 엔티티 → 테이블의 **행**으로 표현
    - 데이터베이스에 “저장된 대상”
- `필드(field)`: 데이터베이스에 저장된 엔티티 속성 → 테이블의 **열**로 표현
    - 차수(degree): 필드의 수
    - 카디날리티(cardinality): 한 필드에 대한 고유 값의 수

### MongoDB

- 개별 레코드를 Json 형태의 데이터인 `도큐먼트`라는 단위로 표현
- 필드를 Json 키의 형태로 표현

### 엔티티와 엔티티 집합에 대한 표현

- `릴레이션(relation)`: RDBMS에서 표현되는 이차원 테이블 형태의 엔티티 집합
- `컬렉션(collection)`: MongoDB에서 표현되는 엔티티 집합

→ 다양한 엔티티들이 릴레이션, 컬렉션 안에 저장되는 것

## 스키마

- RDBMS와 NoSQL 을 구분하는 주요 기준 중 하나
- `스키마(Schema)`: 데이터베이스에 저장되는 레코드의 구조와 제약 조건을 정의한 것
- RDBMS에서는 명확한 스키마가 정의, 레코드들은 이 스키마로 정해진 테이블의 구조, 필드의 데이터 타입 및 제약 조건을 따라야 함
- NoSQL에서는 명확한 스키마가 정의되지 않기 때문에 NoSQL 데이터베이스를 “스키마리스 데이터베이스”라고도 부름

## 트랜잭션과 ACID

### 1. 트랜잭션

- `트랜잭션(transaction)`: 데이터베이스와의 논리적 상호작용의 단위
    - 데이터베이스가 처리하는 작업의 단위
    - 초당 트랜잭션(TPS)이라는 지표를 사용하여 데이터베이스의 작업 성능을 나타내기도 함
- 한 트랜잭션이 하나의 쿼리만 포함하는 것은 아님

### 2. ACID

- `원자성(Atomicity)`: 하나의 트랜잭션 결과가 모두 성공하거나 모두 실패하는 성질
    - 계좌송금시 보내는 쪽은 5000원 감소, 받는 쪽은 5000원 증가가 하나의 단위로 처리됌
    - 모두 실패하거나 모두 성공할 뿐 일부 성공이나 실패는 서용하지 않음(All or Nothing)
- `일관성(Consistency)`: 트랜잭션 전후로 데이터베이스가 일관된 상태를 유지하는 성질
    - “일관된 상태”: 데이터베이스가 지켜야 하는 일련의 규칙들을 지키는 상태
- `격리성(Isolation)`: 동시에 수행되는 여러 트랜잭션이 서로 간섭하지 않도록 보장하는 성질
    - 레이스 컨디션을 방지하는 성질
- `지속성(Durability)`: 트랜잭션이 성공적으로 완료된 후에 그 결과가 영구적으로 반영되는 성질
    - 시스템 장애가 발생하더라도 완료된 트랜잭션의 결과는 손실되지 않아야 함
