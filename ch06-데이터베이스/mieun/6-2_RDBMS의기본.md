# 테이블의 구성: 필드와 레코드

## 1. 필드 타입

- RDBMS의 테이블 필드에는 다양한 데이터 형식(필드 타입) 저장 가능

| **분류** | **타입명** | **주요 용도** | **특징 및 저장 범위** |
| --- | --- | --- | --- |
| **정수** | `TINYINT` | 상태값, 참/거짓, 아주 작은 수 | -128 ~ 127 (1바이트) |
|  | `INT` | 일반적인 일련번호, 수량, ID | 약 -21억 ~ 21억 (4바이트) |
|  | `BIGINT` | 대규모 데이터의 ID, 아주 큰 금액 | $-2^{63}$ ~ $2^{63}-1$ (8바이트) |
| **실수** | `DECIMAL` | 통화(금액), 정확한 소수점 계산 | 오차 없는 고정 소수점 방식 |
|  | `DOUBLE` | 과학적 계산, 통계 데이터 | 부동 소수점 방식 (정밀도 차이 발생 가능) |
| **문자** | `CHAR(n)` | 국가코드, 우편번호, 고정된 코드 | 고정 길이 (공백 채움), 최대 255자 |
|  | `VARCHAR(n)` | 이름, 제목, 주소 등 일반적 텍스트 | 가변 길이 (입력만큼만 저장), 최대 65,535자 |
|  | `TEXT` | 게시글 본문, 긴 설명 | 최대 64KB, 인덱스 설정 시 길이 제한 있음 |
| **날짜** | `DATE` | 생년월일, 기념일 | 날짜만 표시 (`YYYY-MM-DD`) |
|  | `DATETIME` | 게시글 작성일, 예약 시간 | 날짜+시간 그대로 저장 (타임존 무관) |
|  | `TIMESTAMP` | 시스템 변경 이력, 마지막 수정일 | 타임존 영향 받음 (1970년~2038년 제한) |
| **기타** | `ENUM` | 카테고리, 성별 등 고정 목록 | 지정된 값 목록 중 하나만 저장 가능 |

## 2. 키

- `키(key)`: 테이블의 레코드를 식별할 수 있는 하나 이상의 필드
- 테이블 간의 참조
- 테이블의 접근 속도를 높이기 위해 사용되기도 함

### 2.1 후보 키

- 테이블의 한 레코드를 식별하기 위한 필드의 최소 집합
- 특정 레코드를 유일하게 식별한다 → “유일성을 갖추었다”
- 후보키는 하나 이상의 필드로 구성될 수 있으며 후보키에 포함된 필드 중 하나라도 생략하면 레코드를 고유하게 식별할 수 없음
    - 불필요한 필드를 포함하지 않고, 최소한의 정보로 레코드를 식별 → “최소성을 갖추었다”
- **유일성과 최소성을 모두 만족하는 키**
- 후보키는 테이블 내에 하나 이상 존재 가능

### 2.2 복합 키

- 두 필드 이상으로 구성된 후보 키

### 2.3 대체 키

- 기본 키가 아닌 후보 키

### 2.4 슈퍼 키

- 레코드를 식별하기 위한 필드의 집합
- **유일성만 만족하고 최소성은 만족하지 않음**

### 2.5 기본 키(PK)

- 한 레코드를 식별하도록 선정되어 테이블당 하나만 존재할 수 있는 키
- 여러 후보 키 중에서 테이블의 레코드를 대표하도록 선택된 키
- 후보 키의 일부이기 때문에 유일성과 최소성을 모두 만족, 여러 필드로 구성된 기본 키도 존재
- 기본 키는 중복된 값이 없어야 하고 반드시 값이 존재(NOT NULL)해야 하며 레코드를 구분하기 위한 최소한의 정보만으로 이루어져 있어야 함

### 2.6 외래 키(FK)

- 다른 테이블의 기본 키를 참조하는 필드
- 테이블 간의 참조 관계를 형성할 때 사용하는 키

<br>

# 테이블의 관계

## 1. 일대일 대응 관계

- 하나의 레코드가 다른 테이블의 레코드 하나에만 대응되는 경우
    - 승객과 여권번호 테이블: 한 명의 승객에 하나의 여권번호만 대응

## 2. 일대다 대응 관계

- 하나의 레코드가 다른 테이블의 여러 레코드와 대응될 수 있는 경우
    - 주문과 고객 테이블: 고객은 여러 건의 주문 가능, 주문은 한 명의 고객에만 속함

## 3. 다대다 대응 관계

- 한 테이블의 여러 레코드가 다른 테이블의 여러 레코드와 대응되는 경우
    - 사용자와 그룹 테이블: 사용자가 여러 그룹에 가입, 하나의 그룹에 여러 사용자가 속함
- 테이블 간 다대다 대응 관계는 일반적으로 중간 테이블을 수반
<br>

# 무결성 제약 조건

- `무결성`: 일관되며 유효한 데이터의 상태
- `무결성 제약 조건`: 데이터베이스에 저장된 데이터의 일관성과 유효성을 유지하기 위해 마땅히 지켜야 하는 조건

## 1. 도메인 제약 조건

- 테이블이 가질 수 있는 필드 타입과 범위에 대한 규칙
- 각각의 필드 데이터는 원자성과 지정된 필드 타입 준수, 값의 범위나 기본값이 지정되었을 경우 그에 따라야 함

## 2. 키 제약 조건

- 레코드를 고유하게 식별할 수 있는 키(기본키, 후보키, 대체키)로 지정된 필드에 **중복된 값이 존재해서는 안된다**는 제약 조건

## 3. 엔티티 무결성 제약 조건

- 기본 키로 지정한 필드는 고유한 값이어야 하며 NULL이 되어서는 안된다는 규칙

## 4. 참조 무결성 제약 조건(=외래 키 제약 조건)

- 외래 키를 통해 다른 테이블을 참조할 때 데이터의 일관성을 지키기 위한 제약 조건
- 외래 키는 참조하는 테이블의 기본 키와 같은 값을 갖거나 NULL 값을 가져야 한다는 규칙

<br>

# 참조하는 테이블이 삭제/수정되는 경우

## 1. 연산 제한(restrict)

- 주어진 수정 및 삭제 연산 자체를 거부

## 2. 기본값 설정(set default)

- 참조하는 레코드를 미리 지정한 기본값으로 설정

## 3. NULL 값 설정(set null)

- 참조하는 레코드를 NULL로 설정

## 4. 연쇄 변경(cascade)

- 참조하는 레코드도 함께 수정되거나 삭제
